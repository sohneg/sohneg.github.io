name: Update Index.html from README

on:
  push:
    branches:
      - main 
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: Convert README.md to index.html
      uses: jaywcjlove/markdown-to-html-cli@main
      with:
        source: README.md
        output: index.html
        title: "My Project"
        description: "Generated from README.md"
        github-corners: https://github.com/sohneg/sohneg.github.io
        favicon: |
          data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåê</text></svg>

    - name: Push Changes
      env:
        GITHUB_TOKEN: ${{ secrets.PAT_TOKEN }}
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "github-actions[bot]@users.noreply.github.com"
        git add index.html
        git diff-index --quiet HEAD || git commit -m "Update index.html from README.md"
        git push https://x-access-token:${GITHUB_TOKEN}@github.com/sohneg/sohneg.github.io.git HEAD:main

